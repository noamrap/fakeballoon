<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拽 转拽 砖 注 - 专住转 住专</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --accent: #fdcb6e;
            --success: #00b894;
            --error: #ff7675;
            --background: #dfe6e9;
            --card-bg: #ffffff;
            --text: #2d3436;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        header {
            background: linear-gradient(120deg, var(--primary), #8e44ad);
            color: white;
            text-align: center;
            padding: 50px 20px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            margin-bottom: 40px;
        }

        header h1 {
            margin: 0;
            font-size: 3em;
            letter-spacing: -1px;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            font-weight: bold;
            font-size: 1.2em;
        }

        nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }

        .nav-btn {
            background: white;
            border: none;
            color: var(--text);
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .nav-btn.active {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        .section {
            display: none;
            animation: slideUp 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        .section.active {
            display: block;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            font-size: 2em;
            color: var(--primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .visual-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(108, 92, 231, 0.1);
            border: 1px solid rgba(108, 92, 231, 0.1);
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
        }

        .question-card:hover {
            transform: translateY(-2px);
        }

        .tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .tag.calc { background: #e0f7fa; color: #0097a7; }
        .tag.logic { background: #f3e5f5; color: #9c27b0; }
        .tag.real { background: #fff3e0; color: #e67e22; }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .option-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px;
            border-radius: 12px;
            font-size: 1.1em;
            cursor: pointer;
            transition: 0.2s;
            text-align: center;
            font-weight: 500;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background: #fff;
        }

        .option-btn.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .option-btn.wrong {
            background: var(--error);
            color: white;
            border-color: var(--error);
            opacity: 0.5;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            background: #f1f2f6;
            border-right: 4px solid var(--primary);
            display: none;
            animation: fadeIn 0.4s;
        }

        .explanation.show {
            display: block;
        }

        /* Progress Bar */
        .progress-container {
            background: #dfe6e9;
            height: 10px;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            background: var(--success);
            height: 100%;
            width: 0%;
            transition: width 0.5s;
        }

    </style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<div class="container">
    <header>
        <h1>拽 砖 注 3.0 </h1>
        <p>砖转 转, 注转 转 专 转专!</p>
        
        <div class="stats-bar">
            <div class="stat-item" id="score-box">拽: 0</div>
            <div class="stat-item" id="streak-box">专爪祝 转砖转: 0 </div>
        </div>
    </header>

    <nav>
        <button class="nav-btn active" onclick="switchSection('pythagoras')">驻转专住 转拽</button>
        <button class="nav-btn" onclick="switchSection('trig')">专' 注砖</button>
        <button class="nav-btn" onclick="switchSection('shift')">转 专</button>
        <button class="nav-btn" onclick="switchSection('stats')">住住拽 转拽</button>
    </nav>

    <main id="pythagoras" class="section active">
        <h2>砖驻 驻转专住: 注专 砖砖 专</h2>
        <div class="visual-card">
            <h3>驻 驻转专: 驻砖 转 砖砖 住转转专!</h3>
            <p>转 , 注,  专驻 砖 砖拽 - 转 住转转专 砖砖 砖专 转.</p>
            <div class="progress-container"><div class="progress-bar" id="prog-pythagoras"></div></div>
        </div>
        <div id="q-pythagoras"></div>
    </main>

    <main id="trig" class="section">
        <h2>专专  -</h2>
        <div class="visual-card">
            <h3>转  转 注拽</h3>
            <p>砖 住转 注 (住)  转 . 砖 住转  ()  转 注拽.</p>
            <div class="progress-container"><div class="progress-bar" id="prog-trig"></div></div>
        </div>
        <div id="q-trig"></div>
    </main>

    <main id="shift" class="section">
        <h2>Shift: 拽专转 转</h2>
        <div class="visual-card">
            <h3> 转</h3>
            <p> 爪注转 砖转 -> 转  45 注转.<br> 爪 砖 转  爪 转专 -> 转  30 注转.</p>
            <div class="progress-container"><div class="progress-bar" id="prog-shift"></div></div>
        </div>
        <div id="q-shift"></div>
    </main>

    <main id="stats" class="section">
        <h2>住住拽: 砖 注拽</h2>
        <div class="visual-card">
            <h3>砖拽 住驻专</h3>
            <p> 住驻专  专  专住 转 爪注,    爪?</p>
            <div class="progress-container"><div class="progress-bar" id="prog-stats"></div></div>
        </div>
        <div id="q-stats"></div>
    </main>

</div>

<script>
    // --- Data Structure ---
    const quizData = {
        pythagoras: [
            {
                type: "real",
                q: "砖 转:   12 拽\" 爪驻,  驻   5 拽\" 专.  专拽 拽 专 拽转 转?",
                options: ["17 拽\"", "13 拽\"", "7 拽\"", "10 拽\""],
                correct: 1,
                exp: "爪! 爪专 砖砖 砖专 转 注 爪 12 -5. 驻 驻转专住: 144 + 25 = 169. 砖专砖 砖 169  13."
            },
            {
                type: "logic",
                q: ", 专 爪注 专  8 住\" 专 住  10 住\".  专 ?",
                options: ["6 住\"", "2 住\"", "18 住\"", "4.5 住\""],
                correct: 0,
                exp: "住  转专!  注砖 驻转专住 驻: 10虏 驻转 8虏 砖 100-64=36. 砖专砖 砖 36  6."
            },
            {
                type: "calc",
                q: "转 注 砖住 砖  专 10 -24.  专 爪注 注?",
                options: ["13", "17", "26", "12"],
                correct: 0,
                exp: "砖 拽住转 ! 住 注 爪  转  . 爪专 砖砖 砖专 转 注 爪 砖 *爪* 住: 5 -12. 转专 (爪注 注)  13."
            },
            {
                type: "real",
                q: "住 专 5 专 砖注 注 拽专. 住住 住 爪 专拽 3 专 拽专.  拽专 转 住 专  拽专 (专拽 2 专),    注?",
                options: ["注专 4.58 专", "4 专 拽", "5 专", "3.5 专"],
                correct: 0,
                exp: "砖 砖: 转专  5, 爪 砖  2. 25 驻转 4 砖 21. 砖专砖 砖 21  注专 4.58."
            }
        ],
        trig: [
            {
                type: "real",
                q: "住 专 转 砖 30 注转. 砖 注专 专拽 专 (转专) 砖 2 拽专,    爪?",
                options: ["1 拽\"", "2 拽\"", "1.73 拽\"", "0.5 拽\""],
                correct: 0,
                exp: "  爪 *砖* 转. 砖  转专 转. Sin(30) = 0.5.    爪 转专, 专 1 拽\" 拽."
            },
            {
                type: "calc",
                q: "砖砖 砖 砖拽,  住住 爪专 砖 砖砖 砖专 转.  转 住住  70 注转 砖拽 (转专)  10.   砖砖?",
                options: ["Sin(70) * 10", "Cos(70) * 10", "Tan(70) * 10", "10 / Sin(70)"],
                correct: 0,
                exp: "  爪 *砖* -70 注转. 砖  转专 (10).  砖转砖 -Sin. 转砖  10 驻 sin(70)."
            },
            {
                type: "real",
                q: "注  10 专  爪. 转 砖砖  45 注转.  专 爪?",
                options: ["10 专", "5 专", "20 专", "15 专"],
                correct: 0,
                exp: "专拽! 转 45 注转, -Tan  1.  专 砖爪  (注) 砖 爪  (爪).  爪  拽 10 专."
            },
            {
                type: "logic",
                q: " 拽专 注专 砖 -Sin  砖转  -0 -90 注转?",
                options: [" ", " 拽", " 砖专 转 专", " 驻 砖"],
                correct: 0,
                exp: "砖 注 . 砖转 , 爪 砖** 转 转专,  住住  (-0 注 1)."
            }
        ],
        shift: [
            {
                type: "logic",
                q: "砖  砖砖 砖专 转. 爪  转  4, 转专  8.  砖 -   转?",
                options: ["30 注转", "60 注转", "45 注转", "90 注转"],
                correct: 0,
                exp: " :  爪  砖 拽 爪 转专 (4 转 8), 转  转 30 注转."
            },
            {
                type: "calc",
                q: "砖驻注 砖 砖: 注  转拽转 砖 100 专 (), 砖 注 -10 专 ().  驻注 转 转 转 砖驻注?",
                options: ["Shift Tan (10/100)", "Shift Sin (10/100)", "Shift Cos (10/100)", "Tan (100/10)"],
                correct: 0,
                exp: "砖  '' (注) -'' (专拽 驻拽).  住.  爪 转 注砖 Shift Tan."
            },
            {
                type: "real",
                q: " 注祝 注驻驻.  专 50 专 (转专) 注驻驻 专祝 拽 注 注抓 砖爪 专拽 30 专  ().  转 注驻驻?",
                options: ["Shift Cos (30/50)", "Shift Sin (30/50)", "Shift Tan (30/50)", "Shift Cos (50/30)"],
                correct: 0,
                exp: "! 注抓  '' .   转专.  转专  Cosine."
            }
        ],
        stats: [
            {
                type: "logic",
                q: "转 砖 5 转. 爪 : 60, 70, 80, 90, 100. 注 转 砖 注 爪 0.  拽专?",
                options: ["爪注 专 拽, 爪 专 拽爪转", "爪 专 拽, 爪注  砖转", "砖  砖转", "爪注 注"],
                correct: 0,
                exp: "驻住 砖 转 爪注 拽  (  住 住). 爪 专拽  拽  砖  砖转 专 驻转."
            },
            {
                type: "calc",
                q: "爪注 砖 3 住驻专  10. 住驻 住驻专 专注 砖注专 10.  爪注 砖?",
                options: ["10", "12.5", "7.5", "40"],
                correct: 0,
                exp: " 住驻 拽爪 专 砖砖 拽 爪注 砖 - 爪注  砖转!  砖专 10."
            },
            {
                type: "logic",
                q: " 专  爪 砖爪注  住驻专?",
                options: ["驻 爪 '爪注' 转 砖 砖,  砖住驻专 拽爪 砖驻注", " 住 ", " 住驻专 砖", " 住驻专  "],
                correct: 0,
                exp: "拽. 爪 爪 砖砖 转 拽爪 (砖 砖专转:   住 住 专, 爪注 拽驻抓  爪 砖专 )."
            }
        ]
    };

    // --- Logic ---
    let state = {
        score: 0,
        streak: 0,
        progress: { pythagoras: 0, trig: 0, shift: 0, stats: 0 }
    };

    function switchSection(id) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.target.classList.add('active');
        renderQuestions(id);
    }

    function renderQuestions(topic) {
        const container = document.getElementById(`q-${topic}`);
        if(container.innerHTML !== "") return; // Don't re-render if exists

        const questions = quizData[topic];
        let html = '';

        questions.forEach((item, idx) => {
            const tags = {
                real: "砖 ",
                calc: "砖",
                logic: " "
            };

            html += `
            <div class="question-card" id="card-${topic}-${idx}">
                <span class="tag ${item.type}">${tags[item.type]}</span>
                <h3>${item.q}</h3>
                <div class="options-grid">
                    ${item.options.map((opt, optIdx) => 
                        `<button class="option-btn" onclick="handleAnswer('${topic}', ${idx}, ${optIdx}, this)">${opt}</button>`
                    ).join('')}
                </div>
                <div class="explanation" id="exp-${topic}-${idx}">
                    <strong>住专:</strong> ${item.exp}
                </div>
            </div>`;
        });

        container.innerHTML = html;
        updateProgressBar(topic);
    }

    function handleAnswer(topic, qIdx, optIdx, btn) {
        const question = quizData[topic][qIdx];
        const card = document.getElementById(`card-${topic}-${qIdx}`);
        const allBtns = card.querySelectorAll('.option-btn');
        const expBox = document.getElementById(`exp-${topic}-${qIdx}`);

        // Prevent double answering
        if(card.getAttribute('data-answered')) return;
        card.setAttribute('data-answered', 'true');

        if(optIdx === question.correct) {
            btn.classList.add('correct');
            state.score += 10 + (state.streak * 2); // Bonus for streak
            state.streak++;
            state.progress[topic]++;
            fireConfetti(btn); // Visual reward
        } else {
            btn.classList.add('wrong');
            allBtns[question.correct].classList.add('correct'); // Show right answer
            state.streak = 0;
        }

        // UI Updates
        document.getElementById('score-box').textContent = `拽: ${state.score}`;
        document.getElementById('streak-box').textContent = `专爪祝 转砖转: ${state.streak} `;
        expBox.classList.add('show');
        updateProgressBar(topic);

        // Check if finished topic
        if(state.progress[topic] === quizData[topic].length) {
            setTimeout(() => {
                alert(`  注! 住转 转  砖转 砖 ${topic} 爪! `);
                massiveConfetti();
            }, 1000);
        }
    }

    function updateProgressBar(topic) {
        const total = quizData[topic].length;
        const current = state.progress[topic];
        const pct = (current / total) * 100;
        document.getElementById(`prog-${topic}`).style.width = `${pct}%`;
    }

    // --- Simple Confetti Effect ---
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function fireConfetti(element) {
        const rect = element.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top;
        
        for(let i=0; i<30; i++) {
            particles.push({
                x: x, y: y,
                vx: (Math.random() - 0.5) * 10,
                vy: (Math.random() - 1) * 10 - 5,
                color: `hsl(${Math.random()*360}, 100%, 50%)`,
                life: 100
            });
        }
    }

    function massiveConfetti() {
        for(let i=0; i<200; i++) {
            particles.push({
                x: window.innerWidth / 2,
                y: window.innerHeight / 2,
                vx: (Math.random() - 0.5) * 20,
                vy: (Math.random() - 0.5) * 20,
                color: `hsl(${Math.random()*360}, 100%, 50%)`,
                life: 150
            });
        }
    }

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        particles.forEach((p, index) => {
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.2; // Gravity
            p.life--;
            
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
            ctx.fill();

            if(p.life <= 0) particles.splice(index, 1);
        });
        
        requestAnimationFrame(animate);
    }
    animate();

    // Initialize first section
    renderQuestions('pythagoras');

</script>

</body>
</html>
